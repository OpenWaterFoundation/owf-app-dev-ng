<div id="map-container">

  <!-- Optionally define the sidebar content via HTML markup -->
  <div id="sidebar" class="leaflet-sidebar collapsed">

    <!-- Nav Tabs -->
    <div class="leaflet-sidebar-tabs">
      <!-- Top Aligned Tabs -->
      <ul role="tablist">
        <!-- Main menu button (Hamburger Icon) -->
        <li>
          <a href="#home" role="tab" matTooltip="Main tools" matTooltipShowDelay="750" data-cy="sidebar-home">
            <i class="fa fa-bars active"></i>
          </a>
        </li>
        <!-- Autopan button (4 directional arrows) -->
        <!-- <li><a matTooltip="Autopan tools" href="#autopan" role="tab"><i class="fa fa-arrows"></i></a></li> -->
        <!---Information Button (i)-->
        <!-- <li><a matTooltip="Help / About" href="#information" role="tab"><i class="fa fa-info-circle"></i></a></li> -->
      </ul>

      <!-- Bottom Aligned Tabs -->
      <!-- The Help / About anchor that opens up the appropriate portion of the side bar. The commented out line below is an
      example of another anchor that could be added -->
      <ul role="tablist">
        <li>
          <a href="#information" role="tab" matTooltip="Help / About" matTooltipShowDelay="750"
            matTooltipPosition="right" data-cy="sidebar-information">
            <i class="fa fa-info-circle"></i>
          </a>
        </li>
        <!-- <li>
          <a matTooltip="External link to project on GitHub"
                href="https://github.com/nickpeihl/leaflet-sidebar-v2">
            <i class="fa fa-github"></i>
          </a>
        </li> -->
      </ul>

    </div>

    <!-- Panel content -->
    <div class="leaflet-sidebar-content">
      <div class="leaflet-sidebar-pane" id="home">
        <h1 class="leaflet-sidebar-header">
          <div *ngIf="owfCommonService.getGeoMapName()" class="geoMap-title">{{owfCommonService.getGeoMapName()}}</div>

          <div *ngIf="owfCommonService.getMapConfig()">
            <div *ngIf="owfCommonService.getMapConfig().geoMaps[0].properties.docPath" class="geoMap-doc-button">
              <button class="btn geoMap-info-circle"
                (click)="openDocDialog(owfCommonService.getMapConfig().geoMaps[0].properties.docPath, owfCommonService.getMapConfig().geoMaps[0].geoMapId, owfCommonService.getMapConfig().geoMaps[0].name)"
                matTooltip="Click to view map documentation" [matTooltipShowDelay]="750">
                <i class="fa fa-info-circle fa-lg"></i>
              </button>
            </div>
          </div>

          <span matTooltip="Close sidebar" [matTooltipShowDelay]="750" class="leaflet-sidebar-close"
            data-cy="sidebar-close">
            <i class="fa fa-caret-left"></i>
          </span>

        </h1>

        <br>

        <div class="accordion" id="sidebar-accordion">

          <div *ngIf="owfCommonService.getMapConfig()">
            <div *ngFor="let geoLayerViewGroup of owfCommonService.getMapConfig().geoMaps[0].geoLayerViewGroups">

              <div
                *ngIf="geoLayerViewGroup.properties.isBackground === undefined || geoLayerViewGroup.properties.isBackground === 'false'; else background">

                <div class="card"><!-- Class unused. -->

                  <legend-layer-group [geoLayerViewGroup]="geoLayerViewGroup">
                  </legend-layer-group>

                  <!-- TODO: This is where the original geoLayerViewGroup code was. -->

                  <!-- TODO -->
                  <div *ngIf="!geoLayerViewGroup.properties.docPath">
                    <div class="geoLayerViewGroupMain">
                      <button class="btn geoLayerViewGroupName" data-toggle="collapse"
                        [attr.aria-controls]='"collapse-" + geoLayerViewGroup.geoLayerViewGroupId'
                        [attr.data-target]='"#collapse-" + geoLayerViewGroup.geoLayerViewGroupId'
                        matTooltip="Click to expand/collapse layer controls" [matTooltipShowDelay]="750"
                        aria-expanded="true" data-cy="geoLayerViewGroupName">
                        {{geoLayerViewGroup.name}}
                      </button>

                    </div>
                  </div>

                  <!-- TODO: The original legend content for non-background geoLayerViewGroups was here. -->
                  <!-- <div [attr.id]='"collapse-" + geoLayerViewGroup.geoLayerViewGroupId' class="collapse show" aria-labelledby="headingOne"> -->
                  <!-- </div> -->
                </div>

              </div>

              <ng-template #background>
                <legend-background-group [geoLayerViewGroup]="geoLayerViewGroup"
                                          (callSelectBackgroundLayer)="selectBackgroundLayer($event)">
                </legend-background-group>
              </ng-template>

            </div>
          </div>

        </div>

      </div>

      <!-- The side bar information to be displayed when an anchor tag is clicked -->
      <!-- This used to be for the autopan anchor tag -->
      <!-- <div class="leaflet-sidebar-pane" id="autopan">
        <h1 class="leaflet-sidebar-header">
          autopan
          <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
        </h1>
        <p>
          <code>Leaflet.control.sidebar( autopan: true )</code>
          makes sure that the map center always stays visible.
        </p>
        <p>
          The autopan behavior is responsive as well.
          Try opening and closing the sidebar from this pane!
        </p>
      </div> -->

      <!-- The Help / About side bar  -->
      <div class="leaflet-sidebar-pane" id="information">
        <h1 class="leaflet-sidebar-header">
          Help / About
          <span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>
        </h1>
        <div id="information-tab">

          <p>
            <b>Application {{appVersion}}</b>
          </p>

          <p>
            <b>InfoMapper {{(projectVersion | async)?.version}}</b><br>
            Developed by the Open Water Foundation<br>
            The InfoMapper displays spatial data and related information.<br><br>

            Copyright 2018-2022 Open Water Foundation<br><br>

            License GPLv3+: GNU GPL version 3 or later<br><br>

            There is ABSOLUTELY NO WARRANTY; for details see the
            'Disclaimer of Warranty' section of the GPLv3 license in the LICENSE file.
            This is free software: you are free to change and redistribute it
            under the conditions of the GPLv3 license in the LICENSE file.
          </p>

        </div>

      </div>

    </div>
  </div>

  <!-- Create the Leaflet map here -->
  <div id="mapID"></div>

</div>